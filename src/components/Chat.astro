---
---
<div id="chat-widget" class="fixed bottom-4 right-4 w-80 bg-white rounded-lg shadow-lg flex flex-col transition-all duration-300 ease-in-out">
  <!-- Chat Header -->
  <div id="chat-header" class="p-4 bg-gray-800 text-white rounded-t-lg cursor-pointer flex justify-between items-center">
    <h3 class="text-lg font-semibold">Chat with a consultant</h3>
    <button id="chat-toggle" class="text-white focus:outline-none">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
      </svg>
    </button>
  </div>

  <!-- Messages Area & Input Area -->
  <div id="chat-body" class="transition-all duration-300 ease-in-out">
    <div id="message-area" class="p-4 h-64 overflow-y-auto">
      <!-- Example Message from User -->
      <div class="mb-4 flex justify-end">
        <div>
          <div class="bg-blue-500 text-white p-2 rounded-lg max-w-xs">
            <p>Hello, I have a question.</p>
          </div>
          <p class="text-xs text-gray-500 text-right mt-1">You</p>
        </div>
      </div>

      <!-- Example Message from Consultant -->
      <div class="mb-4 flex justify-start">
        <div>
          <div class="bg-gray-200 p-2 rounded-lg max-w-xs">
            <p>Hi there! How can I help you today?</p>
          </div>
          <p class="text-xs text-gray-500 mt-1">Consultant</p>
        </div>
      </div>
    </div>

    <!-- Input Area -->
    <div class="p-4 border-t border-gray-200">
      <form id="chat-form" class="flex">
        <input id="chat-input" type="text" placeholder="Type your message..." class="w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
        <button type="submit" class="bg-blue-500 text-white p-2 rounded-lg ml-2 hover:bg-blue-600">Send</button>
      </form>
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const chatHeader = document.getElementById('chat-header');
    const chatBody = document.getElementById('chat-body');
    const chatToggle = document.getElementById('chat-toggle');
    const chatForm = document.getElementById('chat-form');
    const chatInput = document.getElementById('chat-input');
    const messageArea = document.getElementById('message-area');

    let isChatOpen = true;

    const toggleChat = () => {
      isChatOpen = !isChatOpen;
      chatBody.classList.toggle('hidden', !isChatOpen);
      chatToggle.innerHTML = isChatOpen
        ? `<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg>`
        : `<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7" /></svg>`;
    };

    chatHeader.addEventListener('click', (e) => {
      // Allow clicking the button within the header
      if (e.target.closest('#chat-toggle')) {
        toggleChat();
      } else if(e.target.closest('#chat-header')) {
        toggleChat();
      }
    });

    chatForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const messageText = chatInput.value.trim();
      if (messageText) {
        const messageElement = document.createElement('div');
        messageElement.classList.add('mb-4', 'flex', 'justify-end');
        messageElement.innerHTML = `
          <div>
            <div class="bg-blue-500 text-white p-2 rounded-lg max-w-xs">
              <p>${messageText}</p>
            </div>
            <p class="text-xs text-gray-500 text-right mt-1">You</p>
          </div>
        `;
        messageArea.appendChild(messageElement);
        chatInput.value = '';
        messageArea.scrollTop = messageArea.scrollHeight;
      }
    });
  });
</script>
